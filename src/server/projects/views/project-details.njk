{% extends "layout.njk" %}

{% block pageTitle %}
  {{ project.name }} - Technical Assurance Service
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back to dashboard",
    href: "/projects"
  }) }}
{% endblock %}

{% block content %}
  <div class="govuk-width-container">
    <main class="govuk-main-wrapper">
      <h1 class="govuk-heading-xl">{{ project.name }}</h1>

      {# Project Summary Section #}
      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
          <h2 class="govuk-heading-l">Project Summary</h2>
          <p class="govuk-body">Overall Status: 
            <strong class="govuk-tag govuk-tag--{{ project.overallStatus }}">
              {{ project.overallStatus | upper }}
            </strong>
          </p>
          <p class="govuk-body">{{ project.commentary }}</p>
        </div>
      </div>

      {# Navigation Buttons #}
      <div class="button-nav govuk-!-margin-bottom-6">
        {{ govukButton({
          text: "Overview",
          classes: "js-section-button",
          attributes: {
            "data-section": "overview"
          }
        }) }}
        {{ govukButton({
          text: "Detailed Assessment",
          classes: "js-section-button",
          attributes: {
            "data-section": "detailed"
          }
        }) }}
        {{ govukButton({
          text: "Statistics",
          classes: "js-section-button",
          attributes: {
            "data-section": "statistics"
          }
        }) }}
      </div>

      {# Sections remain the same as before but using govuk macros where possible #}
      {# ... existing sections code ... #}
    </main>
  </div>
{% endblock %}

{% block pageScripts %}
  <script nonce="{{nonce}}">
    document.querySelectorAll('.js-section-button').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelectorAll('.assessment-section').forEach(section => {
          section.hidden = true
        })
        document.getElementById(`${button.dataset.section}-section`).hidden = false
      })
    })
  </script>
{% endblock %} 